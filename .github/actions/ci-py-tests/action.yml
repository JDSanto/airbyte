name: "Runner CI Python Tests"
description: "Runner CI Python Tests"
inputs:
  module-name:
    required: true
  module-folder:
    required: true
outputs:
  coverage-file:
    description: "Cavarage File"
    value: ${{ steps.generate-reports.outputs.coverage-file }}
runs:
  using: "composite"
  steps:
    - name: Build Reports
      id: build-reports
      shell: bash
      run: |
         JSON_CONFIG='{"module": "${{ inputs.module-name }}", "folder": "${{ inputs.module-folder }}", "lang": "py"}'
         REPORT_FOLDER=/tmp/static_report_${RANDOM}
         # REPORT_FOLDER=/tmp/static_report_1000
         ci_build_python_checkers_reports --output_folder "${REPORT_FOLDER}" "${JSON_CONFIG}"
         echo "::set-output name=report-folder::${REPORT_FOLDER}"

    - name: Static Python Tests
      id: generate-reports
      shell: bash
      run: |
          REPORT_FOLDER=${{ steps.build-reports.outputs.report-folder }}
          ls -hal ${REPORT_FOLDER}
#          echo "AAADD ${{ steps.build-reports.outputs.report-folder }}"
#          echo "DDDDD ${{ steps.build-reports.outputs.report-folder }}"
#          ls -hal ${{ steps.build-reports.outputs.report-folder }}
#          exit 1
#          echo "make me, ${{ inputs.module-name }} in ${{ inputs.module-folder }}"
#          echo "::set-output name=coverage-file::${{ github.action_path }}/coverage.xml"
